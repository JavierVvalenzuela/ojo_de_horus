<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Menu</ion-title>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-searchbar slot="end" placeholder="Buscar"></ion-searchbar>
    <ion-button slot="end" [routerDirection]="'root'" [routerLink]="'/login'">Inicio de sesión</ion-button>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ion-item class="post-item">
    <ion-avatar slot="start">
      <img src="https://ionicframework.com/docs/img/demos/avatar.svg" alt="Avatar">
    </ion-avatar>
    <ion-label>
      <!-- Imagen de vista previa -->
      <div *ngIf="selectedImageSrc">
        <img [src]="selectedImageSrc" alt="Vista previa de imagen" style="width: 100%; margin-bottom: 8px;">
      </div>
      <!-- Entrada de texto del post -->
      <ion-input placeholder="¿En qué estás pensando hoy?" lines="full" [(ngModel)]="postMessage"></ion-input>

      <div class="button-group">
        <ion-button expand="full" class="publish" (click)="publishPost()">Publicar</ion-button>
        <ion-button class="image-upload" (click)="fileInput.click()">
          <ion-icon name="image"></ion-icon>
        </ion-button>
        <input type="file" #fileInput accept="image/*" (change)="onImageSelected($event)" style="display: none;">
      </div>
    </ion-label>
  </ion-item>

  <!-- Ejemplo de publicaciones existentes -->
  <ion-card *ngFor="let post of posts" class="card-custom">
    <ion-card-header>
      <ion-card-title><ion-icon name="person-circle"></ion-icon> {{ post.name }}</ion-card-title>
      <p>{{ post.message }}</p>
    </ion-card-header>
    <ion-card-content>
      <img *ngIf="post.image" [src]="post.image" alt="Publicación de {{ post.name }}" style="width: 100%; margin-bottom: 8px;">
      <div class="button-group">
        <div class="left-buttons">
          <ion-button color="primary" (click)="likePost(post)" class="like-button">
            <ion-icon 
              [name]="post.liked ? 'heart' : 'heart-outline'" 
              [class.liked]="post.liked" 
              class="heart-icon"
            ></ion-icon>
            Me Gusta
          </ion-button>
          <ion-button color="secondary">
            <ion-icon name="chatbubble"></ion-icon>
            Comentario
          </ion-button>
        </div>
        <ion-button class="right-button" color="tertiary">
          <ion-icon name="share-social"></ion-icon>
          Compartir
        </ion-button>
      </div>
    </ion-card-content>
  </ion-card>
</ion-content>
